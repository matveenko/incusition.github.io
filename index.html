<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Inquisition Hub</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        :root {
            /* --- –¶–í–ï–¢–û–í–ê–Ø –°–•–ï–ú–ê (DARKEST BLOOD) --- */
            
            /* –ü–æ–ª—É–ø—Ä–æ–∑—Ä–∞—á–Ω—ã–π —Ñ–æ–Ω –¥–ª—è –∫–∞—Ä—Ç–æ—á–µ–∫, —á—Ç–æ–±—ã –æ–Ω–∏ –Ω–µ —Å–ª–∏–≤–∞–ª–∏—Å—å —Å —Ç–µ–º–Ω–æ—Ç–æ–π */
            --bg-card: rgba(55, 10, 17, 0.6); 
            
            --text-main: #FFFFF0; /* –°–ª–æ–Ω–æ–≤–∞—è –∫–æ—Å—Ç—å */
            --text-sec: #A0A090; /* –¢–µ–º–Ω–æ-—Å–µ—Ä—ã–π –¥–ª—è –æ–ø–∏—Å–∞–Ω–∏–π */
            
            --accent: #FFFFF0; /* –ê–∫—Ü–µ–Ω—Ç - –°–ª–æ–Ω–æ–≤–∞—è –∫–æ—Å—Ç—å */
            --accent-dark: #1a0505; /* –¶–≤–µ—Ç —Ç–µ–∫—Å—Ç–∞ –Ω–∞ –∫–Ω–æ–ø–∫–∞—Ö */
            
            --danger-red: #ff3333; 
            
            --radius: 16px;
            --shadow: 0 10px 40px rgba(0,0,0,0.8); /* –û—á–µ–Ω—å –≥–ª—É–±–æ–∫–∏–µ —Ç–µ–Ω–∏ */
            --sheet-bg: #0f0f0f;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; -webkit-tap-highlight-color: transparent; outline: none; }
        
        body {
            /* –ì–†–ê–î–ò–ï–ù–¢: –û–ß–ï–ù–¨ –¢–ï–ú–ù–´–ô */
            /* –°–≤–µ—Ä—Ö—É: –ü–æ—á—Ç–∏ —á–µ—Ä–Ω—ã–π —Å –æ—Ç—Ç–µ–Ω–∫–æ–º –∫—Ä–æ–≤–∏ (rgb 20, 5, 8) */
            /* –°–Ω–∏–∑—É: –ü–æ–ª–Ω–∞—è —Ç—å–º–∞ (#050505) */
            background: linear-gradient(180deg, rgb(63, 7, 7) 0%, #1d0404 100%);
            background-attachment: fixed;
            color: var(--text-main);
            padding-bottom: 40px;
            opacity: 0; 
            animation: fadeInPage 0.3s ease-out forwards;
            min-height: 100vh;
        }

        @keyframes fadeInPage { to { opacity: 1; } }
        @keyframes glideUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        .glide-entry { opacity: 0; animation: glideUp 0.5s cubic-bezier(0.2, 0.8, 0.2, 1) forwards; }
        @keyframes shimmer { 0% { transform: translateX(-100%) skewX(-15deg); } 100% { transform: translateX(200%) skewX(-15deg); } }

        /* --- HEADER --- */
        .header-container {
            position: fixed; top: 0; left: 0; width: 100%;
            background: rgba(20, 5, 8, 0.95);
            z-index: 100;
            padding: 15px 15px 10px 15px;
            border-bottom: 1px solid rgba(255, 255, 240, 0.05);
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }
        .header-top-row { display: flex; align-items: center; gap: 10px; }
        
        .back-btn { 
            padding: 0 16px; height: 42px; background: rgba(255,255,255,0.05); 
            border-radius: 12px; color: var(--accent); 
            font-weight: 800; font-size: 14px; cursor: pointer; 
            display: none; align-items: center; justify-content: center;
            border: 1px solid rgba(255, 255, 240, 0.1); transition: all 0.2s;
        }
        .back-btn:active { background: rgba(255, 255, 240, 0.1); transform: scale(0.95); }
        
        .search-box { 
            flex: 1; height: 42px; background: rgba(0,0,0,0.3); 
            border: 1px solid rgba(255, 255, 240, 0.1); border-radius: 12px; 
            padding: 0 15px; color: var(--text-main); font-size: 15px; transition: all 0.3s;
        }
        .search-box::placeholder { color: rgba(255, 255, 240, 0.2); }
        .search-box:focus { border-color: var(--accent); box-shadow: 0 0 15px rgba(255, 255, 240, 0.05); }
        
        .tags-wrapper { display: none; gap: 8px; overflow-x: auto; padding-top: 12px; padding-bottom: 5px; scrollbar-width: none; }
        .tags-wrapper::-webkit-scrollbar { display: none; }
        .tag { white-space: nowrap; padding: 8px 16px; background: rgba(255,255,255,0.05); border-radius: 30px; font-size: 13px; font-weight: 700; color: rgba(255, 255, 240, 0.5); cursor: pointer; border: 1px solid transparent; transition: all 0.3s; }
        .tag.active { background: var(--accent); color: var(--accent-dark); box-shadow: 0 4px 15px rgba(255, 255, 240, 0.2); font-weight: 900; }

        /* --- CONTENT --- */
        .main-content { padding: 80px 15px 80px 15px; transition: padding-top 0.3s ease; }

        /* --- PROGRESS CARD --- */
        .progress-card {
            background: var(--bg-card);
            border-radius: var(--radius); padding: 20px;
            margin-bottom: 20px; 
            border: 1px solid rgba(255, 255, 240, 0.08);
            box-shadow: var(--shadow);
            position: relative; overflow: hidden;
        }
        .progress-card.ascended {
            background: linear-gradient(135deg, #000000, #1a1a1a);
            border: 1px solid var(--accent);
            box-shadow: 0 0 30px rgba(255, 255, 240, 0.1);
        }
        
        .rank-header { display: flex; justify-content: space-between; align-items: flex-end; margin-bottom: 10px; }
        .rank-title { font-size: 12px; color: rgba(255, 255, 240, 0.4); text-transform: uppercase; font-weight: 700; letter-spacing: 1px; }
        .rank-name { font-size: 18px; font-weight: 900; color: var(--accent); text-transform: uppercase; letter-spacing: 0.5px; margin-top: 4px; text-shadow: 0 0 15px rgba(255, 255, 240, 0.1); }
        
        .rank-name.ascended-text {
            background: linear-gradient(90deg, #FFFFF0, #ff4d4d, #FFFFF0);
            background-size: 200%; -webkit-background-clip: text; -webkit-text-fill-color: transparent;
            animation: gradientMove 3s linear infinite; font-size: 20px; letter-spacing: 1px;
        }
        @keyframes gradientMove { 0% { background-position: 0% 50%; } 100% { background-position: 100% 50%; } }

        .progress-stats { font-size: 12px; color: var(--text-sec); font-weight: 600; opacity: 0.8; }
        .progress-bar-bg { width: 100%; height: 8px; background: rgba(0,0,0,0.5); border-radius: 4px; overflow: hidden; position: relative; margin-bottom: 15px; }
        .progress-bar-fill { height: 100%; background: var(--accent); width: 0%; border-radius: 4px; transition: width 0.5s cubic-bezier(0.4, 0, 0.2, 1); box-shadow: 0 0 10px rgba(255, 255, 240, 0.3); }

        /* ACHIVEMENTS ROW */
        .achievements-row {
            display: flex; gap: 8px; justify-content: space-between;
            padding-top: 15px; border-top: 1px solid rgba(255, 255, 240, 0.08);
            overflow-x: auto; scrollbar-width: none;
        }
        .badge {
            width: 40px; height: 40px; min-width: 40px; border-radius: 50%;
            background: rgba(0,0,0,0.3); border: 1px solid rgba(255, 255, 240, 0.1);
            display: flex; align-items: center; justify-content: center;
            font-size: 20px; color: rgba(255, 255, 240, 0.2); filter: grayscale(1); opacity: 0.5;
            transition: all 0.3s; cursor: pointer;
        }
        .badge.unlocked {
            filter: grayscale(0); opacity: 1;
            background: rgba(255, 255, 240, 0.1);
            color: #fff;
            border-color: var(--accent);
            box-shadow: 0 0 10px rgba(255, 255, 240, 0.1);
        }
        .badge:active { transform: scale(0.9); }

        .badge.secret { border: 1px dashed rgba(255, 255, 240, 0.2); }
        .badge.secret.unlocked {
            border: 1px solid var(--accent);
            background: var(--accent);
            color: var(--accent-dark);
            box-shadow: 0 0 20px rgba(255, 255, 240, 0.4);
            animation: pulse 2s infinite;
        }
        @keyframes pulse { 0% { box-shadow: 0 0 10px rgba(255, 255, 240, 0.2); } 50% { box-shadow: 0 0 25px rgba(255, 255, 240, 0.4); } 100% { box-shadow: 0 0 10px rgba(255, 255, 240, 0.2); } }

        /* --- SPECIAL CARDS --- */
        .special-card {
            margin-bottom: 20px; border-radius: var(--radius); padding: 25px 20px;
            cursor: pointer; position: relative; overflow: hidden;
            display: flex; flex-direction: column; justify-content: center;
            transition: transform 0.1s; min-height: 100px;
            box-shadow: var(--shadow);
            background: var(--bg-card);
            border: 1px solid rgba(255, 255, 240, 0.08);
        }
        .special-card:active { transform: scale(0.98); }

        .card-gold { border-left: 6px solid var(--accent); }
        
        .sp-title { font-weight: 900; font-size: 19px; text-transform: uppercase; letter-spacing: 1px; margin-bottom: 6px; z-index: 2; }
        .gold-text { color: var(--accent); text-shadow: 0 2px 15px rgba(255, 255, 240, 0.2); }
        
        .sp-desc { color: var(--text-sec); font-size: 13px; line-height: 1.3; z-index: 2; opacity: 0.9; font-weight: 500; }
        .sp-bg-icon { position: absolute; right: -10px; bottom: -15px; font-size: 80px; opacity: 0.05; transform: rotate(-20deg); filter: grayscale(100%); z-index: 0; pointer-events: none; }

        /* --- TILES --- */
        #homeTilesContainer { display: grid; grid-template-columns: repeat(auto-fit, minmax(145px, 1fr)); gap: 15px; margin-top: 10px; }
        
        .category-tile {
            background: rgba(255, 255, 255, 0.03);
            border-radius: var(--radius); padding: 25px 20px; cursor: pointer;
            position: relative; overflow: hidden; 
            border: 1px solid rgba(255, 255, 240, 0.08);
            box-shadow: var(--shadow);
            display: flex; flex-direction: column; justify-content: space-between;
            min-height: 140px; transition: transform 0.1s;
        }
        .category-tile:active { transform: scale(0.97); border-color: var(--accent); background: rgba(255, 255, 240, 0.05); }
        .tile-icon { font-size: 32px; margin-bottom: 15px; }
        .tile-title { font-size: 15px; font-weight: 800; color: var(--text-main); text-transform: uppercase; letter-spacing: 0.5px; line-height: 1.2; word-break: break-word; hyphens: auto; }
        .tile-count { font-size: 12px; color: rgba(255, 255, 240, 0.3); margin-top: 8px; font-weight: 500; }

        /* --- LIST & POSTS --- */
        #listViewContainer { display: none; }
        .section-header { margin-top: 25px; margin-bottom: 15px; display: flex; align-items: center; color: var(--accent); font-weight: 800; font-size: 14px; text-transform: uppercase; letter-spacing: 1.2px; }
        .section-header::before { content: ''; display: inline-block; width: 4px; height: 18px; background: var(--accent); margin-right: 12px; border-radius: 4px; box-shadow: 0 0 10px rgba(255, 255, 240, 0.3); }
        .posts-list { display: flex; flex-direction: column; gap: 12px; }
        
        .post-card { 
            background-color: rgba(255, 255, 255, 0.03); 
            padding: 18px; border-radius: var(--radius); cursor: pointer; 
            position: relative; overflow: hidden; 
            border: 1px solid rgba(255, 255, 240, 0.05); 
            box-shadow: 0 4px 15px rgba(0,0,0,0.5); 
        }
        .post-card:active { background-color: rgba(255, 255, 255, 0.08); border-color: var(--accent); }
        .post-title { font-size: 15px; line-height: 1.5; font-weight: 600; color: var(--text-main); display: flex; justify-content: space-between; align-items: flex-start; }
        .is-read { opacity: 0.5; }
        .read-icon { color: var(--accent); font-weight: bold; margin-left: 10px; font-size: 14px; text-shadow: 0 0 10px rgba(255, 255, 240, 0.3); }
        .post-locked { border-left: 3px solid var(--danger-red); background: rgba(50, 0, 0, 0.3); }
        .lock-icon { color: var(--danger-red); margin-left: 10px; }
        .highlight { background: rgba(255, 255, 240, 0.2); color: #fff; padding: 0 2px; border-radius: 4px; }

        /* --- MODALS & SHEETS --- */
        .toast {
            position: fixed; bottom: 100px; left: 50%; transform: translateX(-50%) translateY(20px);
            background: #111; border: 1px solid var(--accent);
            color: #fff; padding: 12px 20px; border-radius: 30px;
            font-size: 14px; font-weight: 600; z-index: 3000;
            opacity: 0; visibility: hidden; transition: all 0.3s;
            box-shadow: 0 5px 20px rgba(0,0,0,0.8); text-align: center; white-space: nowrap;
        }
        .toast.show { opacity: 1; visibility: visible; transform: translateX(-50%) translateY(0); }

        .celebration-modal {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0, 0, 0, 0.95); backdrop-filter: blur(10px);
            z-index: 2000; display: flex; align-items: center; justify-content: center;
            opacity: 0; visibility: hidden; transition: all 0.4s;
        }
        .celebration-modal.active { opacity: 1; visibility: visible; }
        
        .celebration-card {
            background: linear-gradient(135deg, rgb(30, 5, 8), #111);
            border: 2px solid var(--accent);
            border-radius: 24px; padding: 30px 20px;
            width: 85%; max-width: 350px; text-align: center;
            transform: scale(0.8); transition: transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            box-shadow: 0 0 60px rgba(255, 255, 240, 0.15);
        }
        .celebration-modal.active .celebration-card { transform: scale(1); }
        
        .cel-icon { font-size: 60px; margin-bottom: 20px; filter: drop-shadow(0 0 20px var(--accent)); }
        .cel-title { color: #888; font-size: 12px; letter-spacing: 2px; text-transform: uppercase; font-weight: 700; margin-bottom: 10px; }
        .cel-name { 
            color: var(--accent); font-size: 24px; font-weight: 900; text-transform: uppercase; 
            margin-bottom: 15px; line-height: 1.2; text-shadow: 0 0 20px rgba(255, 255, 240, 0.3);
        }
        .cel-msg { color: var(--text-sec); font-size: 14px; margin-bottom: 30px; line-height: 1.4; font-style: italic; }
        .cel-btn {
            background: var(--accent); color: var(--accent-dark);
            border: none; padding: 16px 30px; border-radius: 16px;
            font-weight: 900; font-size: 16px; text-transform: uppercase;
            width: 100%; cursor: pointer; box-shadow: 0 5px 20px rgba(255, 255, 240, 0.2);
        }
        .cel-btn:active { transform: scale(0.97); }

        .modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.85); backdrop-filter: blur(5px); z-index: 500; opacity: 0; visibility: hidden; transition: opacity 0.2s; }
        .modal-overlay.active { opacity: 1; visibility: visible; }
        
        .bottom-sheet { 
            position: fixed; bottom: 0; left: 0; width: 100%; 
            background-color: var(--sheet-bg); 
            border-top-left-radius: 25px; border-top-right-radius: 25px; 
            padding: 25px 20px 45px 20px; z-index: 600; 
            transform: translateY(100%); transition: transform 0.3s cubic-bezier(0.16, 1, 0.3, 1); 
            box-shadow: 0 -10px 60px rgba(0,0,0,0.9); 
            max-height: 85vh; overflow-y: auto; 
            border-top: 1px solid rgba(255, 255, 240, 0.1); 
        }
        .bottom-sheet.active { transform: translateY(0); }
        
        .sheet-handle { width: 50px; height: 6px; background: #333; border-radius: 10px; margin: 0 auto 25px auto; }
        .sheet-category { color: var(--accent); font-size: 13px; font-weight: 700; text-transform: uppercase; margin-bottom: 12px; letter-spacing: 1px; display: flex; align-items: center; gap: 8px; }
        .sheet-title { font-size: 24px; font-weight: 800; line-height: 1.3; margin-bottom: 30px; color: var(--text-main); }
        .sheet-actions { display: flex; gap: 10px; margin-bottom: 30px; }
        
        .btn-main { flex: 1; text-align: center; background: var(--accent); color: var(--accent-dark); font-weight: 900; font-size: 16px; text-transform: uppercase; padding: 16px; border-radius: 14px; border: none; cursor: pointer; box-shadow: 0 5px 20px rgba(255, 255, 240, 0.15); transition: transform 0.1s; }
        .btn-main:active { transform: scale(0.97); }
        
        .btn-icon { flex: 0 0 52px; height: 52px; display: flex; align-items: center; justify-content: center; background: rgba(255, 255, 240, 0.05); color: var(--accent); border: 1px solid var(--accent); border-radius: 14px; font-weight: 700; font-size: 20px; cursor: pointer; transition: background 0.1s; backdrop-filter: blur(5px); }
        .btn-icon:active { background: rgba(255, 255, 240, 0.2); }
        .btn-icon.active { background: var(--accent); color: var(--accent-dark); box-shadow: 0 0 15px rgba(255, 255, 240, 0.2); }

        .related-section { border-top: 1px solid rgba(255, 255, 240, 0.1); padding-top: 25px; }
        .related-header { font-size: 14px; color: rgba(255, 255, 240, 0.5); margin-bottom: 18px; font-weight: 700; text-transform: uppercase; }
        .related-item { background: rgba(255, 255, 255, 0.05); padding: 14px 18px; border-radius: 12px; margin-bottom: 12px; font-size: 14px; color: var(--text-sec); display: flex; align-items: center; justify-content: space-between; border: 1px solid rgba(255, 255, 240, 0.05); font-weight: 600; }
        .related-item:active { background: rgba(255, 255, 255, 0.1); }
        .related-arrow { color: var(--accent); font-weight: bold; }
        
        .upsell-btn { background: rgba(255, 255, 255, 0.05); border: 1px solid rgba(255, 255, 240, 0.1); color: var(--text-sec); padding: 16px; border-radius: 14px; text-align: center; font-size: 14px; font-weight: 600; margin-top: 25px; width: 100%; display: flex; align-items: center; justify-content: center; gap: 10px; transition: all 0.2s; }
        .upsell-btn:active { border-color: var(--accent); color: var(--accent); background: rgba(255, 255, 240, 0.05); }
        
        .empty-state { text-align: center; color: rgba(255, 255, 240, 0.4); margin-top: 60px; font-size: 15px; font-weight: 500; }
        .btn-inq-action { margin-top: 20px; font-size: 14px; padding: 14px 24px; width: auto; display: inline-block; background: linear-gradient(135deg, var(--danger-red), #900000); color: #FFFFFF !important; font-weight: 800; text-transform: uppercase; border-radius: 12px; border: none; box-shadow: 0 5px 20px rgba(207, 10, 10, 0.4); transition: transform 0.1s; letter-spacing: 0.5px; }
        .btn-inq-action:active { transform: scale(0.97); }

        .fab-dice {
            position: fixed; bottom: 30px; right: 20px; width: 56px; height: 56px;
            background: var(--accent); border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            font-size: 28px; box-shadow: 0 5px 20px rgba(255, 255, 240, 0.3);
            z-index: 90; cursor: pointer; transition: transform 0.2s;
            border: 2px solid rgba(255,255,255,0.2); color: var(--accent-dark);
        }
        .fab-dice:active { transform: scale(0.9) rotate(20deg); }
    </style>
</head>
<body>

    <div class="header-container" id="listHeader">
        <div class="header-top-row">
            <div class="back-btn" id="backToHomeBtn">‚Üê</div>
            <input type="text" id="searchInput" class="search-box" placeholder="–ü–æ–∏—Å–∫ –≤ –∞—Ä—Ö–∏–≤–∞—Ö...">
        </div>
        <div class="tags-wrapper" id="tagsContainer"></div>
    </div>

    <div class="main-content" id="mainContent">
        
        <div id="homeWrapper">
            <div class="progress-card glide-entry" id="progressCard" style="animation-delay: 0.02s;">
                <div class="rank-header">
                    <div>
                        <div class="rank-title">–¢–≤–æ–π —Å—Ç–∞—Ç—É—Å:</div>
                        <div class="rank-name" id="rankName">–ü–û–°–õ–ï–î–û–í–ê–¢–ï–õ–¨</div>
                    </div>
                    <div class="progress-stats" id="progressStats">0%</div>
                </div>
                <div class="progress-bar-bg">
                    <div class="progress-bar-fill" id="progressBar"></div>
                </div>
                <div class="achievements-row" id="achievementsRow"></div>
            </div>

            <div class="special-card card-gold glide-entry" id="credoBtn" style="animation-delay: 0.1s;">
                <div class="sp-title gold-text">üèõ –§–£–ù–î–ê–ú–ï–ù–¢ (–û–¢–ß–ï–¢–´)</div>
                <div class="sp-desc">–û—Ç—á–µ—Ç—ã –∏–Ω–∫–≤–∏–∑–∏—Ü–∏–∏ –∏ –≤–∞–∂–Ω—ã–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è.</div>
                <div class="sp-bg-icon">üìú</div>
            </div>

            <div id="homeTilesContainer"></div>
        </div>

        <div id="listViewContainer">
             <div class="posts-list" id="postsContainer"></div>
        </div>

    </div>

    <div class="fab-dice" id="randomBtn">üé≤</div>
    
    <div id="celebrationModal" class="celebration-modal">
        <div class="celebration-card">
            <div class="cel-icon" id="celIcon">üèÜ</div>
            <div class="cel-title">–î–û–°–¢–ò–ñ–ï–ù–ò–ï –†–ê–ó–ë–õ–û–ö–ò–†–û–í–ê–ù–û</div>
            <div class="cel-name" id="celName">–ò–ú–Ø –ê–ß–ò–í–ö–ò</div>
            <div class="cel-msg" id="celMsg">–û–ø–∏—Å–∞–Ω–∏–µ</div>
            <button class="cel-btn" onclick="closeCelModal()">–ó–ê–ï–ë–ò–°–¨</button>
        </div>
    </div>

    <div id="toast" class="toast">–ò–Ω—Ñ–æ</div>

    <div class="modal-overlay" id="modalOverlay"></div>
    <div class="bottom-sheet" id="postSheet">
        <div class="sheet-handle"></div>
        <div class="sheet-category" id="sheetCategory">–†–£–ë–†–ò–ö–ê</div>
        <div class="sheet-title" id="sheetTitle">–ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å—Ç–∞—Ç—å–∏</div>
        
        <div class="sheet-actions" id="sheetActions">
            <button class="btn-main" id="readBtn">–ß–ò–¢–ê–¢–¨ –°–¢–ê–¢–¨–Æ üî•</button>
            <button class="btn-icon" id="favSheetBtn">‚≠êÔ∏è</button>
            <button class="btn-icon" id="shareBtn">üì§</button>
        </div>
        
        <button class="btn-inq-action" id="lockedBtn" style="display:none; width:100%; margin-top:0;">–î–û–°–¢–£–ü–ù–û –í –ò–ù–ö–í–ò–ó–ò–¶–ò–ò üîí</button>

        <div class="related-section">
            <div class="related-header">–ï—â—ë –ø–æ —ç—Ç–æ–π —Ç–µ–º–µ:</div>
            <div id="relatedContainer"></div>
        </div>
        <button class="upsell-btn" id="upsellBtn">üéÅ –ó–∞–±—Ä–∞—Ç—å —Å–µ–∫—Ä–µ—Ç–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã (–ë–æ—Ç)</button>
    </div>

    <script>
        // === –ë–ê–ó–ê –ó–ù–ê–ù–ò–ô (postsDB) ===
        const postsDB = [
            // üíÄ –ñ–ò–ó–ù–¨ –í –ê–î–£ (–°—é–¥–∞ –ø–µ—Ä–µ–µ—Ö–∞–ª "–§—É–Ω–¥–∞–º–µ–Ω—Ç")
            {t: "–û–ü–´–¢ –†–ê–ë–û–¢–´ –í –ù–ê–ô–ú–ï: –ß–¢–û –¢–´ –î–û–õ–ñ–ï–ù –í–´–ù–ï–°–¢–ò?", u: "https://t.me/c/2283029399/18", c: "üíÄ –ñ–ò–ó–ù–¨ –í –ê–î–£"},
            {t: "–î–ï–¢–°–ö–ò–ô –î–û–ú", u: "https://t.me/c/2283029399/21", c: "üíÄ –ñ–ò–ó–ù–¨ –í –ê–î–£"},
            {t: "–°–ú–ï–†–¢–¨ –û–¢ –ì–û–õ–û–î–ê –ò–õ–ò –ñ–†–ê–¢–¨ –° –ü–û–ú–û–ô–ö–ò?", u: "https://t.me/c/2283029399/22", c: "üíÄ –ñ–ò–ó–ù–¨ –í –ê–î–£"},
            {t: "–ù–ê–°–ò–õ–ò–ï –í –°–ï–ú–¨–ï", u: "https://t.me/c/2283029399/23", c: "üíÄ –ñ–ò–ó–ù–¨ –í –ê–î–£"},
            {t: "–ü–û–¢–ï–†–Ø –ü–ê–ú–Ø–¢–ò –ù–ê –ì–û–î", u: "https://t.me/c/2283029399/24", c: "üíÄ –ñ–ò–ó–ù–¨ –í –ê–î–£"},
            {t: "–°–ú–ï–†–¢–ò –ë–õ–ò–ó–ö–ò–•", u: "https://t.me/c/2283029399/26", c: "üíÄ –ñ–ò–ó–ù–¨ –í –ê–î–£"},
            {t: "–î–´–•–ê–ù–ò–ï –°–ú–ï–†–¢–ò", u: "https://t.me/c/2283029399/28", c: "üíÄ –ñ–ò–ó–ù–¨ –í –ê–î–£"},
            {t: "–í–û–†–û–í–°–¢–í–û", u: "https://t.me/c/2283029399/104", c: "üíÄ –ñ–ò–ó–ù–¨ –í –ê–î–£"},
            {t: "–†–û–°–ö–û–ú–ù–ê–î–ó–û–†: –ü–û–•–£–ò–ó–ú –ö –ñ–ò–ó–ù–ò", u: "https://t.me/c/2283029399/212", c: "üíÄ –ñ–ò–ó–ù–¨ –í –ê–î–£"},
            {t: "–î–ò–°–°–û–¶–ò–ê–¢–ò–í–ù–´–ô –¢–†–ò–ü", u: "https://t.me/c/2283029399/334", c: "üíÄ –ñ–ò–ó–ù–¨ –í –ê–î–£"},
            {t: "–î–ò–°–°–û–¶–ò–ê–¢–ò–í–ù–´–ô –¢–†–ò–ü –ß.2", u: "https://t.me/c/2283029399/373", c: "üíÄ –ñ–ò–ó–ù–¨ –í –ê–î–£"},
            {t: "–ù–ï–ù–ê–í–ò–°–¢–¨ ‚Äî –¢–û–ü–õ–ò–í–û –° –ù–£–õ–ï–í–´–ú –ö–ü–î", u: "https://t.me/c/2283029399/409", c: "üíÄ –ñ–ò–ó–ù–¨ –í –ê–î–£"},
            // –ü–µ—Ä–µ–Ω–µ—Å–µ–Ω–Ω–æ–µ –∏–∑ –§–£–ù–î–ê–ú–ï–ù–¢–ê:
            {t: "–¢–£–õ–¨–ü–û–í–û–î–°–¢–í–û", u: "https://t.me/c/2283029399/20", c: "üíÄ –ñ–ò–ó–ù–¨ –í –ê–î–£"},
            {t: "–¢–£–õ–¨–ü–û–í–û–í–î–°–¢–í–û –ß.2", u: "https://t.me/c/2283029399/155", c: "üíÄ –ñ–ò–ó–ù–¨ –í –ê–î–£"},
            {t: "–†–ê–ó–†–ï–®–ò –°–ï–ë–ï –ü–†–û–ò–ì–†–ê–¢–¨", u: "https://t.me/c/2283029399/30", c: "üíÄ –ñ–ò–ó–ù–¨ –í –ê–î–£"},
            {t: "–ú–ò–†–û–í–û–°–ü–†–ò–Ø–¢–ò–ï", u: "https://t.me/c/2283029399/50", c: "üíÄ –ñ–ò–ó–ù–¨ –í –ê–î–£"},
            {t: "–ö–ê–ö –ù–ï –°–ë–ò–¢–¨–°–Ø –° –ü–£–¢–ò?", u: "https://t.me/c/2283029399/51", c: "üíÄ –ñ–ò–ó–ù–¨ –í –ê–î–£"},
            {t: "–û –ü–†–ò–ó–í–ê–ù–ò–ò", u: "https://t.me/c/2283029399/52", c: "üíÄ –ñ–ò–ó–ù–¨ –í –ê–î–£"},
            {t: "–¢–ï–ú–ù–ê–Ø –°–¢–û–†–û–ù–ê –õ–ò–ß–ù–û–°–¢–ò", u: "https://t.me/c/2283029399/53", c: "üíÄ –ñ–ò–ó–ù–¨ –í –ê–î–£"},
            {t: "–ó–ê–ö–†–ï–ü–õ–ï–ù–ò–ï –í –°–û–û–ë–©–ï–°–¢–í–ï", u: "https://t.me/c/2283029399/59", c: "üíÄ –ñ–ò–ó–ù–¨ –í –ê–î–£"},
            {t: "–°–ò–ù–î–†–û–ú –°–ê–ú–û–ó–í–ê–ù–¶–ê", u: "https://t.me/c/2283029399/83", c: "üíÄ –ñ–ò–ó–ù–¨ –í –ê–î–£"},
            {t: "–î–ò–í–ï–†–°–ò–§–ò–ö–ê–¶–ò–Ø –†–ò–°–ö–ê", u: "https://t.me/c/2283029399/190", c: "üíÄ –ñ–ò–ó–ù–¨ –í –ê–î–£"},
            {t: "–ó–ê–ö–û–ù –ò–ù–ö–í–ò–ó–ò–¶–ò–ò", u: "https://t.me/c/2283029399/19", c: "üíÄ –ñ–ò–ó–ù–¨ –í –ê–î–£"},
            {t: "LIBER INQUISITIONIS", u: "https://t.me/c/2283029399/46", c: "üíÄ –ñ–ò–ó–ù–¨ –í –ê–î–£"},
            {t: "–£–†–û–ë–û–†–û–°", u: "https://t.me/c/2283029399/309", c: "üíÄ –ñ–ò–ó–ù–¨ –í –ê–î–£"},

            // üõ° –ü–°–ò–•–ò–ß–ï–°–ö–ê–Ø –ù–ï–£–Ø–ó–í–ò–ú–û–°–¢–¨
            {t: "–ü–°–ò–•–ò–ß–ï–°–ö–ê–Ø –ù–ï–£–Ø–ó–í–ò–ú–û–°–¢–¨ (–¶–ï–õ–ï–ü–û–õ–ê–ì–ê–ù–ò–ï)", u: "https://t.me/c/2283029399/62", c: "üõ° –ü–°–ò–•–ò–ß–ï–°–ö–ê–Ø –ù–ï–£–Ø–ó–í–ò–ú–û–°–¢–¨"},
            {t: "–ü–°–ò–•–ò–ß–ï–°–ö–ê–Ø –ù–ï–£–Ø–ó–í–ò–ú–û–°–¢–¨ (–ö –ß–ï–ú–£ –ò–î–ï–ú)", u: "https://t.me/c/2283029399/66", c: "üõ° –ü–°–ò–•–ò–ß–ï–°–ö–ê–Ø –ù–ï–£–Ø–ó–í–ò–ú–û–°–¢–¨"},
            {t: "–í–ù–ï–®–ù–ï–ï (–≠–ú–û–¶–ò–û–ù–ê–õ–¨–ù–ê–Ø –ë–ê–ó–ê)", u: "https://t.me/c/2283029399/76", c: "üõ° –ü–°–ò–•–ò–ß–ï–°–ö–ê–Ø –ù–ï–£–Ø–ó–í–ò–ú–û–°–¢–¨"},
            {t: "–ì–û–õ–û–í–ù–Ø–ö–ò", u: "https://t.me/c/2283029399/85", c: "üõ° –ü–°–ò–•–ò–ß–ï–°–ö–ê–Ø –ù–ï–£–Ø–ó–í–ò–ú–û–°–¢–¨"},
            {t: "–†–ï–ì–ï–ù–ï–†–ê–¶–ò–Ø", u: "https://t.me/c/2283029399/96", c: "üõ° –ü–°–ò–•–ò–ß–ï–°–ö–ê–Ø –ù–ï–£–Ø–ó–í–ò–ú–û–°–¢–¨"},
            {t: "–ö–ê–ö –ù–ï –ü–û–ï–•–ê–¢–¨ –ö–£–ö–£–•–û–ô?", u: "https://t.me/c/2283029399/58", c: "üõ° –ü–°–ò–•–ò–ß–ï–°–ö–ê–Ø –ù–ï–£–Ø–ó–í–ò–ú–û–°–¢–¨"},
            {t: "–ê–ú–ü–£–¢–ê–¶–ò–Ø –ü–†–û–®–õ–û–ì–û", u: "https://t.me/c/2283029399/355", c: "üõ° –ü–°–ò–•–ò–ß–ï–°–ö–ê–Ø –ù–ï–£–Ø–ó–í–ò–ú–û–°–¢–¨"},
            {t: "–°–ï–ô–§-–ó–û–ù–ê", u: "https://t.me/c/2283029399/406", c: "üõ° –ü–°–ò–•–ò–ß–ï–°–ö–ê–Ø –ù–ï–£–Ø–ó–í–ò–ú–û–°–¢–¨"},
            {t: "–°–¢–†–ï–°–°", u: "https://t.me/c/2283029399/289", c: "üõ° –ü–°–ò–•–ò–ß–ï–°–ö–ê–Ø –ù–ï–£–Ø–ó–í–ò–ú–û–°–¢–¨"},
            {t: "–ù–£ –≠–¢–û –£–ñ–ï –ü–ò–ó–î–ï–¶ (–ß. 1)", u: "https://t.me/c/2283029399/115", c: "üõ° –ü–°–ò–•–ò–ß–ï–°–ö–ê–Ø –ù–ï–£–Ø–ó–í–ò–ú–û–°–¢–¨"},
            {t: "–ù–£ –≠–¢–û –£–ñ–ï –ü–ò–ó–î–ï–¶ (–ß. 2)", u: "https://t.me/c/2283029399/148", c: "üõ° –ü–°–ò–•–ò–ß–ï–°–ö–ê–Ø –ù–ï–£–Ø–ó–í–ò–ú–û–°–¢–¨"},
            {t: "–ù–£ –≠–¢–û –£–ñ–ï –ü–ò–ó–î–ï–¶ (–ß. 3)", u: "https://t.me/c/2283029399/175", c: "üõ° –ü–°–ò–•–ò–ß–ï–°–ö–ê–Ø –ù–ï–£–Ø–ó–í–ò–ú–û–°–¢–¨"},
            {t: "–ù–£ –≠–¢–û –£–ñ–ï –ü–ò–ó–î–ï–¶ (–ß. 4)", u: "https://t.me/c/2283029399/202", c: "üõ° –ü–°–ò–•–ò–ß–ï–°–ö–ê–Ø –ù–ï–£–Ø–ó–í–ò–ú–û–°–¢–¨"},
            {t: "–ù–£ –≠–¢–û –£–ñ–ï –ü–ò–ó–î–ï–¶ (–ß. 5)", u: "https://t.me/c/2283029399/247", c: "üõ° –ü–°–ò–•–ò–ß–ï–°–ö–ê–Ø –ù–ï–£–Ø–ó–í–ò–ú–û–°–¢–¨"},

            // ‚öîÔ∏è –ó–ê–©–ò–¢–ê –û–¢ –¢–ï–ú–ù–´–• –ò–°–ö–£–°–°–¢–í
            {t: "–í–í–ï–î–ï–ù–ò–ï", u: "https://t.me/c/2283029399/38", c: "‚öîÔ∏è –¢–ï–ú–ù–´–ï –ò–°–ö–£–°–°–¢–í–ê"},
            {t: "–≠–ú–ü–ê–¢–ò–Ø", u: "https://t.me/c/2283029399/61", c: "‚öîÔ∏è –¢–ï–ú–ù–´–ï –ò–°–ö–£–°–°–¢–í–ê"},
            {t: "–ü–†–ò–ú–ï–†–´ –≠–ú–ü–ê–¢–ò–ò", u: "https://t.me/c/2283029399/69", c: "‚öîÔ∏è –¢–ï–ú–ù–´–ï –ò–°–ö–£–°–°–¢–í–ê"},
            {t: "–í–í–ï–î–ï–ù–ò–ï –í –ù–õ–ü", u: "https://t.me/c/2283029399/39", c: "‚öîÔ∏è –¢–ï–ú–ù–´–ï –ò–°–ö–£–°–°–¢–í–ê"},
            {t: "–°–£–ë–ú–û–î–ê–õ–¨–ù–û–ï –ö–û–î–ò–†–û–í–ê–ù–ò–ï", u: "https://t.me/c/2283029399/42", c: "‚öîÔ∏è –¢–ï–ú–ù–´–ï –ò–°–ö–£–°–°–¢–í–ê"},
            {t: "–ö–û–ì–ù–ò–¢–ò–í–ù–ê–Ø –ü–†–û–í–û–ö–ê–¶–ò–Ø", u: "https://t.me/c/2283029399/84", c: "‚öîÔ∏è –¢–ï–ú–ù–´–ï –ò–°–ö–£–°–°–¢–í–ê"},
            {t: "–°–û–¶–ò–ê–õ–¨–ù–ê–Ø –ò–ù–ñ–ï–ù–ï–†–ò–Ø (–í–í–ï–î–ï–ù–ò–ï)", u: "https://t.me/c/2283029399/86", c: "‚öîÔ∏è –¢–ï–ú–ù–´–ï –ò–°–ö–£–°–°–¢–í–ê"},
            {t: "–ß–£–í–°–¢–í–û –í–ò–ù–´", u: "https://t.me/c/2283029399/95", c: "‚öîÔ∏è –¢–ï–ú–ù–´–ï –ò–°–ö–£–°–°–¢–í–ê"},
            {t: "–ú–ê–ù–ò–ü–£–õ–Ø–¶–ò–Ø –¶–ï–ù–ù–û–°–¢–¨–Æ", u: "https://t.me/c/2283029399/103", c: "‚öîÔ∏è –¢–ï–ú–ù–´–ï –ò–°–ö–£–°–°–¢–í–ê"},
            {t: "–ü–û–î–†–´–í –ê–í–¢–û–†–ò–¢–ï–¢–ê", u: "https://t.me/c/2283029399/143", c: "‚öîÔ∏è –¢–ï–ú–ù–´–ï –ò–°–ö–£–°–°–¢–í–ê"},
            {t: "–®–ê–ù–¢–ê–ñ", u: "https://t.me/c/2283029399/168", c: "‚öîÔ∏è –¢–ï–ú–ù–´–ï –ò–°–ö–£–°–°–¢–í–ê"},
            {t: "–°–û–¶–ò–ê–õ–¨–ù–ê–Ø –ò–ù–ñ–ï–ù–ï–†–ò–Ø (–ê–¢–ê–ö–ê –ò –ó–ê–©–ò–¢–ê)", u: "https://t.me/c/2283029399/180", c: "‚öîÔ∏è –¢–ï–ú–ù–´–ï –ò–°–ö–£–°–°–¢–í–ê"},
            {t: "–ù–ï–û–ü–†–ï–î–ï–õ–ï–ù–ù–û–°–¢–¨", u: "https://t.me/c/2283029399/256", c: "‚öîÔ∏è –¢–ï–ú–ù–´–ï –ò–°–ö–£–°–°–¢–í–ê"},
            {t: "–°–û–õ–û–ú–ï–ù–ù–û–ï –ß–£–ß–ï–õ–û", u: "https://t.me/c/2283029399/287", c: "‚öîÔ∏è –¢–ï–ú–ù–´–ï –ò–°–ö–£–°–°–¢–í–ê"},
            {t: "–ê–ë–¨–Æ–ó", u: "https://t.me/c/2283029399/340", c: "‚öîÔ∏è –¢–ï–ú–ù–´–ï –ò–°–ö–£–°–°–¢–í–ê"},
            {t: "–ü–†–û–¢–ò–í–û–î–ï–ô–°–¢–í–ò–ï –°–ò", u: "https://t.me/c/2283029399/372", c: "‚öîÔ∏è –¢–ï–ú–ù–´–ï –ò–°–ö–£–°–°–¢–í–ê"},
            {t: "–ü–£–¢–¨ –í 1000 –õ–ò", u: "https://t.me/c/2283029399/399", c: "‚öîÔ∏è –¢–ï–ú–ù–´–ï –ò–°–ö–£–°–°–¢–í–ê"},
            {t: "–®–ö–û–õ–ê –ú–ê–ù–ò–ü–£–õ–Ø–¶–ò–ô", u: "https://t.me/c/2283029399/402", c: "‚öîÔ∏è –¢–ï–ú–ù–´–ï –ò–°–ö–£–°–°–¢–í–ê"},
            {t: "–†–ê–î–ò–ö–ê–õ–´ (–ù–õ–ü)", u: "https://t.me/c/2283029399/227", c: "‚öîÔ∏è –¢–ï–ú–ù–´–ï –ò–°–ö–£–°–°–¢–í–ê"},
            {t: "–í–ù–ï–®–ù–ò–ô –í–ò–î –†–ê–î–ò–ö–ê–õ–û–í", u: "https://t.me/c/2283029399/240", c: "‚öîÔ∏è –¢–ï–ú–ù–´–ï –ò–°–ö–£–°–°–¢–í–ê"},

            // ‚ù§Ô∏è –°–û–ë–õ–ê–ó–ù–ï–ù–ò–ï
            {t: "–ß–ï–ì–û –•–û–¢–Ø–¢ –ñ–ï–ù–©–ò–ù–´ (–ß–ê–°–¢–¨ 1)", u: "https://t.me/c/2283029399/68", c: "‚ù§Ô∏è –°–û–ë–õ–ê–ó–ù–ï–ù–ò–ï"},
            {t: "–ß–ï–ì–û –•–û–¢–Ø–¢ –ñ–ï–ù–©–ò–ù–´ (–ß–ê–°–¢–¨ 2)", u: "https://t.me/c/2283029399/71", c: "‚ù§Ô∏è –°–û–ë–õ–ê–ó–ù–ï–ù–ò–ï"},
            {t: "–ß–ï–ì–û –•–û–¢–Ø–¢ –ñ–ï–ù–©–ò–ù–´ (–ß–ê–°–¢–¨ 3)", u: "https://t.me/c/2283029399/74", c: "‚ù§Ô∏è –°–û–ë–õ–ê–ó–ù–ï–ù–ò–ï"},
            {t: "–ò–ù–í–ï–†–°–ò–Ø –î–û–ú–ò–ù–ò–†–û–í–ê–ù–ò–Ø", u: "https://t.me/c/2283029399/77", c: "‚ù§Ô∏è –°–û–ë–õ–ê–ó–ù–ï–ù–ò–ï"},
            {t: "–ë–†–û–í–ê–°–¢–´–ï –ü–ê–†–ê–ó–ò–¢–´ –ò –ò–°–¢–ï–†–û–ò–î–´", u: "https://t.me/c/2283029399/55", c: "‚ù§Ô∏è –°–û–ë–õ–ê–ó–ù–ï–ù–ò–ï"},
            {t: "–í–ó–ê–ò–ú–û–î–ï–ô–°–¢–í–ò–ï –° –ò–°–¢–ï–†–û–ò–î–ù–´–ú–ò", u: "https://t.me/c/2283029399/56", c: "‚ù§Ô∏è –°–û–ë–õ–ê–ó–ù–ï–ù–ò–ï"},
            {t: "–ñ–ï–ù–°–ö–ò–ï –ü–†–û–í–ï–†–ö–ò", u: "https://t.me/c/2283029399/87", c: "‚ù§Ô∏è –°–û–ë–õ–ê–ó–ù–ï–ù–ò–ï"},
            {t: "–ù–ï–ü–†–ò–ì–û–î–ö–ò", u: "https://t.me/c/2283029399/92", c: "‚ù§Ô∏è –°–û–ë–õ–ê–ó–ù–ï–ù–ò–ï"},
            {t: "–ñ–ï–ù–°–ö–ò–ï –ü–†–û–í–ï–†–ö–ò", u: "https://t.me/c/2283029399/99", c: "‚ù§Ô∏è –°–û–ë–õ–ê–ó–ù–ï–ù–ò–ï"},
            {t: "–ë–ê–õ–ê–ù–° –ó–ù–ê–ß–ò–ú–û–°–¢–ò", u: "https://t.me/c/2283029399/105", c: "‚ù§Ô∏è –°–û–ë–õ–ê–ó–ù–ï–ù–ò–ï"},
            {t: "WOMANSPLAINING", u: "https://t.me/c/2283029399/149", c: "‚ù§Ô∏è –°–û–ë–õ–ê–ó–ù–ï–ù–ò–ï"},
            {t: "–ü–û–ß–ï–ú–£ –¢–´ –í–õ–Æ–ë–õ–Ø–ï–®–¨–°–Ø?", u: "https://t.me/c/2283029399/181", c: "‚ù§Ô∏è –°–û–ë–õ–ê–ó–ù–ï–ù–ò–ï"},
            {t: "–ü–†–ò–ù–¶–ò–ü –û–¢–ö–†–´–¢–û–ô –î–í–ï–†–ò", u: "https://t.me/c/2283029399/192", c: "‚ù§Ô∏è –°–û–ë–õ–ê–ó–ù–ï–ù–ò–ï"},
            {t: "–ü–ï–†–ï–í–û–†–û–¢ –§–†–ï–ô–ú–ê", u: "https://t.me/c/2283029399/197", c: "‚ù§Ô∏è –°–û–ë–õ–ê–ó–ù–ï–ù–ò–ï"},
            {t: "–°–¢–ê–î–ò–ò: –í–í–ï–î–ï–ù–ò–ï", u: "https://t.me/c/2283029399/250", c: "‚ù§Ô∏è –°–û–ë–õ–ê–ó–ù–ï–ù–ò–ï"},
            {t: "–°–¢–ê–î–ò–ò: –ó–ù–ê–ö–û–ú–°–¢–í–û", u: "https://t.me/c/2283029399/275", c: "‚ù§Ô∏è –°–û–ë–õ–ê–ó–ù–ï–ù–ò–ï"},
            {t: "–°–¢–ê–î–ò–ò: –ù–ê–ß–ê–õ–û –°–í–ò–î–ê–ù–ò–Ø", u: "https://t.me/c/2283029399/279", c: "‚ù§Ô∏è –°–û–ë–õ–ê–ó–ù–ï–ù–ò–ï"},
            {t: "–û –ß–ï–ú –ì–û–í–û–†–ò–¢–¨", u: "https://t.me/c/2283029399/313", c: "‚ù§Ô∏è –°–û–ë–õ–ê–ó–ù–ï–ù–ò–ï"},
            {t: "–û–¢ –î–í–ï–†–ò –î–û –ö–†–û–í–ê–¢–ò", u: "https://t.me/c/2283029399/381", c: "‚ù§Ô∏è –°–û–ë–õ–ê–ó–ù–ï–ù–ò–ï"},
            {t: "–ü–û–°–¢-–°–ï–ö–°", u: "https://t.me/c/2283029399/417", c: "‚ù§Ô∏è –°–û–ë–õ–ê–ó–ù–ï–ù–ò–ï"},
            {t: "–ì–ê–ô–î –ù–ê –°–ó (PDF)", u: "https://t.me/c/2283029399/154", c: "‚ù§Ô∏è –°–û–ë–õ–ê–ó–ù–ï–ù–ò–ï"},

            // üß™ –†–ê–î–ò–ö–ê–õ–¨–ù–û–ï –£–õ–£–ß–®–ï–ù–ò–ï –ó–î–û–†–û–í–¨–Ø
            {t: "–ü–†–ê–í–ò–õ–ê", u: "https://t.me/c/2283029399/81", c: "üß™ –ó–î–û–†–û–í–¨–ï"},
            {t: "–ê–ù–ê–õ–ò–ó–´: –ó–ê–ß–ï–ú", u: "https://t.me/c/2283029399/100", c: "üß™ –ó–î–û–†–û–í–¨–ï"},
            {t: "–ê–ù–ê–õ–ò–ó–´: –°–ü–ò–°–û–ö", u: "https://t.me/c/2283029399/101", c: "üß™ –ó–î–û–†–û–í–¨–ï"},
            {t: "–ê–ù–ê–õ–ò–ó–´: –†–ê–°–®–ò–§–†–û–í–ö–ê", u: "https://t.me/c/2283029399/108", c: "üß™ –ó–î–û–†–û–í–¨–ï"},
            {t: "–ê–ù–ê–õ–ò–ó–´: –ë–ò–û–ú–ê–†–ö–ï–†–´", u: "https://t.me/c/2283029399/144", c: "üß™ –ó–î–û–†–û–í–¨–ï"},
            {t: "–û–°–ê–ù–ö–ê", u: "https://t.me/c/2283029399/123", c: "üß™ –ó–î–û–†–û–í–¨–ï"},
            {t: "–£–ü–†–ê–ñ–ù–ï–ù–ò–Ø –ü–†–û–¢–ò–í –°–†–£–©–ï–ô –°–û–ë–ê–ö–ò", u: "https://t.me/c/2283029399/286", c: "üß™ –ó–î–û–†–û–í–¨–ï"},
            {t: "–û–°–ù–û–í–ê –ü–ò–¢–ê–ù–ò–Ø", u: "https://t.me/c/2283029399/157", c: "üß™ –ó–î–û–†–û–í–¨–ï"},
            {t: "–ù–ï–†–í–ù–ê–Ø –°–ò–°–¢–ï–ú–ê: –£–°–¢–ê–õ–û–°–¢–¨", u: "https://t.me/c/2283029399/164", c: "üß™ –ó–î–û–†–û–í–¨–ï"},
            {t: "–ù–ï–†–í–ù–ê–Ø –°–ò–°–¢–ï–ú–ê: –≠–ù–ï–†–ì–ò–Ø", u: "https://t.me/c/2283029399/165", c: "üß™ –ó–î–û–†–û–í–¨–ï"},
            {t: "–ù–ï–†–í–ù–ê–Ø –°–ò–°–¢–ï–ú–ê: –¢–ê–ë–õ–ï–¢–ö–ò", u: "https://t.me/c/2283029399/166", c: "üß™ –ó–î–û–†–û–í–¨–ï"},
            {t: "–í–û–õ–û–°–´", u: "https://t.me/c/2283029399/193", c: "üß™ –ó–î–û–†–û–í–¨–ï"},
            {t: "–§–ò–ù–ê–°–¢–ï–†–ò–î", u: "https://t.me/c/2283029399/195", c: "üß™ –ó–î–û–†–û–í–¨–ï"},
            {t: "–¢–ï–°–¢–û–°–¢–ï–†–û–ù –ß.1", u: "https://t.me/c/2283029399/208", c: "üß™ –ó–î–û–†–û–í–¨–ï"},
            {t: "–¢–ï–°–¢–û–°–¢–ï–†–û–ù –ß.2", u: "https://t.me/c/2283029399/223", c: "üß™ –ó–î–û–†–û–í–¨–ï"},
            {t: "–¢–ï–°–¢–û–°–¢–ï–†–û–ù –ß.3", u: "https://t.me/c/2283029399/242", c: "üß™ –ó–î–û–†–û–í–¨–ï"},
            {t: "–¢–ï–°–¢–û–°–¢–ï–†–û–ù –ß.4", u: "https://t.me/c/2283029399/262", c: "üß™ –ó–î–û–†–û–í–¨–ï"},
            {t: "–¢–ï–°–¢–û–°–¢–ï–†–û–ù –ß.5", u: "https://t.me/c/2283029399/268", c: "üß™ –ó–î–û–†–û–í–¨–ï"},
            {t: "–¢–ï–°–¢–û–°–¢–ï–†–û–ù –ß.6", u: "https://t.me/c/2283029399/271", c: "üß™ –ó–î–û–†–û–í–¨–ï"},
            {t: "–î–û–§–ê–ú–ò–ù –ß.1", u: "https://t.me/c/2283029399/184", c: "üß™ –ó–î–û–†–û–í–¨–ï"},
            {t: "–î–û–§–ê–ú–ò–ù –ß.2", u: "https://t.me/c/2283029399/185", c: "üß™ –ó–î–û–†–û–í–¨–ï"},
            {t: "–î–û–§–ê–ú–ò–ù –ß.3", u: "https://t.me/c/2283029399/186", c: "üß™ –ó–î–û–†–û–í–¨–ï"},
            {t: "–•–û–õ–ï–°–¢–ï–†–ò–ù –ß.1", u: "https://t.me/c/2283029399/294", c: "üß™ –ó–î–û–†–û–í–¨–ï"},
            {t: "–•–û–õ–ï–°–¢–ï–†–ò–ù –ß.2", u: "https://t.me/c/2283029399/321", c: "üß™ –ó–î–û–†–û–í–¨–ï"},
            {t: "–•–û–õ–ï–°–¢–ï–†–ò–ù –ß.3", u: "https://t.me/c/2283029399/342", c: "üß™ –ó–î–û–†–û–í–¨–ï"},
            {t: "–°–û–ù, –ú–ï–¢–ê–ë–û–õ–ò–ó–ú, –ò–ú–ú–£–ù–ò–¢–ï–¢ –ß.1", u: "https://t.me/c/2283029399/361", c: "üß™ –ó–î–û–†–û–í–¨–ï"},
            {t: "–°–û–ù, –ú–ï–¢–ê–ë–û–õ–ò–ó–ú, –ò–ú–ú–£–ù–ò–¢–ï–¢ –ß.2", u: "https://t.me/c/2283029399/384", c: "üß™ –ó–î–û–†–û–í–¨–ï"},
            {t: "–°–û–ù, –ú–ï–¢–ê–ë–û–õ–ò–ó–ú, –ò–ú–ú–£–ù–ò–¢–ï–¢ –ß.3", u: "https://t.me/c/2283029399/420", c: "üß™ –ó–î–û–†–û–í–¨–ï"},
            {t: "–í–õ–ï–ß–ï–ù–ò–ï –ß.1", u: "https://t.me/c/2283029399/391", c: "üß™ –ó–î–û–†–û–í–¨–ï"},
            {t: "–í–õ–ï–ß–ï–ù–ò–ï –ß.2", u: "https://t.me/c/2283029399/412", c: "üß™ –ó–î–û–†–û–í–¨–ï"},
            {t: "–í–õ–ï–ß–ï–ù–ò–ï –ß.3", u: "https://t.me/c/2283029399/414", c: "üß™ –ó–î–û–†–û–í–¨–ï"},
            {t: "–í–õ–ï–ß–ï–ù–ò–ï –ß.4", u: "https://t.me/c/2283029399/422", c: "üß™ –ó–î–û–†–û–í–¨–ï"},

            // üëÅ –ë–û–†–¨–ë–ê –° –ò–ù–§–û–•–ò–ú–ï–†–ê–ú–ò
            {t: "–ò–ù–§–û–†–ú–ê–¶–ò–û–ù–ù–´–ï –•–ò–ú–ï–†–´", u: "https://t.me/c/2283029399/64", c: "üëÅ –ò–ù–§–û–•–ò–ú–ï–†–´"},
            {t: "BULLSHIT-–î–ï–¢–ï–ö–¢–û–†", u: "https://t.me/c/2283029399/73", c: "üëÅ –ò–ù–§–û–•–ò–ú–ï–†–´"},
            {t: "–í–ë–†–û–°–´", u: "https://t.me/c/2283029399/80", c: "üëÅ –ò–ù–§–û–•–ò–ú–ï–†–´"},
            {t: "–•–ò–ú–ï–†–´", u: "https://t.me/c/2283029399/88", c: "üëÅ –ò–ù–§–û–•–ò–ú–ï–†–´"},
            {t: "–§–ï–ô–ö", u: "https://t.me/c/2283029399/112", c: "üëÅ –ò–ù–§–û–•–ò–ú–ï–†–´"},
            {t: "–ë–õ–Ø–î–°–ö–ò–ï –•–ò–ú–ï–†–´", u: "https://t.me/c/2283029399/113", c: "üëÅ –ò–ù–§–û–•–ò–ú–ï–†–´"},
            {t: "USAID", u: "https://t.me/c/2283029399/150", c: "üëÅ –ò–ù–§–û–•–ò–ú–ï–†–´"},
            {t: "–ü–†–û–ü–ê–ì–ê–ù–î–ê", u: "https://t.me/c/2283029399/174", c: "üëÅ –ò–ù–§–û–•–ò–ú–ï–†–´"},
            {t: "–ê–°–¢–†–û–¢–£–†–§–ò–ù–ì", u: "https://t.me/c/2283029399/207", c: "üëÅ –ò–ù–§–û–•–ò–ú–ï–†–´"},
            {t: "–≠–•–û-–ö–ê–ú–ï–†–ê", u: "https://t.me/c/2283029399/273", c: "üëÅ –ò–ù–§–û–•–ò–ú–ï–†–´"},
            {t: "–ü–°–ò–û–ü", u: "https://t.me/c/2283029399/301", c: "üëÅ –ò–ù–§–û–•–ò–ú–ï–†–´"},
            {t: "–û–ö–ù–û –û–í–ï–†–¢–û–ù–ê", u: "https://t.me/c/2283029399/352", c: "üëÅ –ò–ù–§–û–•–ò–ú–ï–†–´"},
            {t: "–ü–°–ò–û–ü –ö–ê–õ–õ–ê–°", u: "https://t.me/c/2283029399/396", c: "üëÅ –ò–ù–§–û–•–ò–ú–ï–†–´"},
            {t: "–ò–ù–í–ï–†–°–ò–Ø –ú–û–†–ê–õ–ò", u: "https://t.me/c/2283029399/424", c: "üëÅ –ò–ù–§–û–•–ò–ú–ï–†–´"},
            {t: "–î–û–ú–ê–®–ù–ï–ï –ó–ê–î–ê–ù–ò–ï", u: "https://t.me/c/2283029399/307", c: "üëÅ –ò–ù–§–û–•–ò–ú–ï–†–´"},

            // üíä –¢–ê–ë–õ–ï–¢–ö–ê –û–¢ –ò–ù–§–ê–ù–¢–ò–õ–¨–ù–û–°–¢–ò
            {t: "–ú–ê–°–®–¢–ê–ë", u: "https://t.me/c/2283029399/221", c: "üíä –ò–ù–§–ê–ù–¢–ò–õ–¨–ù–û–°–¢–¨"},
            {t: "–≠–ì–û-–°–û–°–¢–û–Ø–ù–ò–Ø", u: "https://t.me/c/2283029399/325", c: "üíä –ò–ù–§–ê–ù–¢–ò–õ–¨–ù–û–°–¢–¨"},
            {t: "–ì–ï–®–¢–ê–õ–¨–¢-–î–ï–†–¨–ú–û", u: "https://t.me/c/2283029399/370", c: "üíä –ò–ù–§–ê–ù–¢–ò–õ–¨–ù–û–°–¢–¨"},
            {t: "–ö–ü–¢", u: "https://t.me/c/2283029399/427", c: "üíä –ò–ù–§–ê–ù–¢–ò–õ–¨–ù–û–°–¢–¨"},
            {t: "–¢–†–ï–£–ì–û–õ–¨–ù–ò–ö –ö–ê–†–ü–ú–ê–ù–ê", u: "https://t.me/c/2283029399/220", c: "üíä –ò–ù–§–ê–ù–¢–ò–õ–¨–ù–û–°–¢–¨"},
            {t: "–°–ú–ï–©–ï–ù–ù–ê–Ø –ê–ö–¢–ò–í–ù–û–°–¢–¨", u: "https://t.me/c/2283029399/335", c: "üíä –ò–ù–§–ê–ù–¢–ò–õ–¨–ù–û–°–¢–¨"},

            // üö≠ –ë–û–†–¨–ë–ê –° –ó–ê–í–ò–°–ò–ú–û–°–¢–Ø–ú–ò
            {t: "INTRO", u: "https://t.me/c/2283029399/70", c: "üö≠ –ó–ê–í–ò–°–ò–ú–û–°–¢–ò"},
            {t: "–ü–†–ê–í–ò–õ–ê –í–´–Ø–í–õ–ï–ù–ò–Ø", u: "https://t.me/c/2283029399/98", c: "üö≠ –ó–ê–í–ò–°–ò–ú–û–°–¢–ò"},
            {t: "–§–û–†–ú–ò–†–û–í–ê–ù–ò–ï", u: "https://t.me/c/2283029399/102", c: "üö≠ –ó–ê–í–ò–°–ò–ú–û–°–¢–ò"},
            {t: "–ö–ê–ö –¢–´ –ü–û–î–°–ê–ñ–ò–í–ê–ï–®–¨–°–Ø", u: "https://t.me/c/2283029399/159", c: "üö≠ –ó–ê–í–ò–°–ò–ú–û–°–¢–ò"},
            {t: "–ê–õ–ö–û–ì–û–õ–¨: –¢–†–ê–î–ò–¶–ò–ò", u: "https://t.me/c/2283029399/188", c: "üö≠ –ó–ê–í–ò–°–ò–ú–û–°–¢–ò"},
            {t: "–≠–õ–ò–¢–ù–û–ï –ë–£–•–ê–ù–ò–ï", u: "https://t.me/c/2283029399/209", c: "üö≠ –ó–ê–í–ò–°–ò–ú–û–°–¢–ò"},
            {t: "–ê–®–ö–£–î–≠ –ß.1", u: "https://t.me/c/2283029399/345", c: "üö≠ –ó–ê–í–ò–°–ò–ú–û–°–¢–ò"},
            {t: "–ê–®–ö–£–î–≠ –ß.2", u: "https://t.me/c/2283029399/388", c: "üö≠ –ó–ê–í–ò–°–ò–ú–û–°–¢–ò"},

            // üëî –°–¢–ò–õ–¨ ‚Äî –≠–¢–û –í–°–Å
            {t: "–†–£–ë–ê–®–ö–ê", u: "https://t.me/c/2283029399/162", c: "üëî –°–¢–ò–õ–¨"},
            {t: "–ë–ê–ó–ê (–¢–†–ò –ê–ü–û–°–¢–û–õ–ê)", u: "https://t.me/c/2283029399/200", c: "üëî –°–¢–ò–õ–¨"},
            {t: "–°–¢–†–ò–¢ –ß.1", u: "https://t.me/c/2283029399/316", c: "üëî –°–¢–ò–õ–¨"},
            {t: "–ù–ò–ó –°–¢–†–ò–¢", u: "https://t.me/c/2283029399/332", c: "üëî –°–¢–ò–õ–¨"},
            {t: "–í–ï–†–• –°–¢–†–ò–¢", u: "https://t.me/c/2283029399/365", c: "üëî –°–¢–ò–õ–¨"},
            {t: "–û–ë–£–í–¨ –°–¢–†–ò–¢", u: "https://t.me/c/2283029399/378", c: "üëî –°–¢–ò–õ–¨"},
            {t: "–ö–≠–ñ–£–ê–õ –ß.1", u: "https://t.me/c/2283029399/426", c: "üëî –°–¢–ò–õ–¨"},

            // üèõ –§–£–ù–î–ê–ú–ï–ù–¢ (–û—Å—Ç–∞–ª–∏—Å—å —Ç–æ–ª—å–∫–æ –û—Ç—á–µ—Ç—ã)
            {t: "–ì–∞–π–¥ –Ω–∞ —Å–∞–π—Ç—ã –∑–Ω–∞–∫–æ–º—Å—Ç–≤ (–§–∞–π–ª)", u: "https://t.me/masonsmansion/309", c: "üèõ –§–£–ù–î–ê–ú–ï–ù–¢ (–û–¢–ß–ï–¢–´)" },
            {t: "–û—Ç—á–µ—Ç –ò–Ω–∫–≤–∏–∑–∏—Ü–∏–∏ #1", u: "https://t.me/masonsmansion/392", c: "üèõ –§–£–ù–î–ê–ú–ï–ù–¢ (–û–¢–ß–ï–¢–´)" },
            {t: "–û—Ç—á–µ—Ç –ò–Ω–∫–≤–∏–∑–∏—Ü–∏–∏ #2", u: "https://t.me/masonsmansion/428", c: "üèõ –§–£–ù–î–ê–ú–ï–ù–¢ (–û–¢–ß–ï–¢–´)" },
            {t: "–û—Ç—á–µ—Ç –ò–Ω–∫–≤–∏–∑–∏—Ü–∏–∏ #3", u: "https://t.me/masonsmansion/507", c: "üèõ –§–£–ù–î–ê–ú–ï–ù–¢ (–û–¢–ß–ï–¢–´)" },
            {t: "–ó–∞—á–µ–º –º—ã –ø—Ä–µ–¥–ª–∞–≥–∞–µ–º —Ç–µ–±–µ –ò–Ω–∫–≤–∏–∑–∏—Ü–∏—é?", u: "https://t.me/masonsmansion/521", c: "üèõ –§–£–ù–î–ê–ú–ï–ù–¢ (–û–¢–ß–ï–¢–´)" }
        ];

        const tg = window.Telegram.WebApp;
        tg.ready();
        tg.expand();
        tg.setHeaderColor('#140305');
        tg.setBackgroundColor('#140305');

        const STATE_KEY = 'mm_hub_state_v10'; 
        const READ_KEY = 'mm_read_posts';
        const FAV_KEY = 'mm_favorites';
        const NOTIFIED_KEY = 'mm_notified_achievements'; 
        const STATE_TTL = 15 * 60 * 1000; 

        // === –ê–ß–ò–í–ö–ò ===
        const ACHIEVEMENTS_CONFIG = {
            "üíÄ": { name: "–í–´–ñ–ò–í–®–ò–ô", icon: "üíÄ", color: "#e74c3c", msg: "–¢—ã –ø—Ä–æ—à–µ–ª –∞–¥ –∏ –≤—ã–∂–∏–ª. –≠—Ç–æ —Ç–æ–ª—å–∫–æ –Ω–∞—á–∞–ª–æ." },
            "üëÅ": { name: "–ö–†–ò–¢–ò–ö", icon: "üëÅ", color: "#3498db", msg: "–¢—ã –≤–∏–¥–∏—à—å —Å–∫–≤–æ–∑—å –ª–æ–∂—å –∏ –∏–Ω—Ñ–æ—Ö–∏–º–µ—Ä—ã." },
            "‚ù§Ô∏è": { name: "–ò–°–ö–£–°–ò–¢–ï–õ–¨", icon: "‚ù§Ô∏è", color: "#e056fd", msg: "–¢—ã –æ–≤–ª–∞–¥–µ–ª –∏—Å–∫—É—Å—Å—Ç–≤–æ–º —Å–æ–±–ª–∞–∑–Ω–µ–Ω–∏—è." },
            "‚öîÔ∏è": { name: "–ö–£–ö–õ–û–í–û–î", icon: "‚öîÔ∏è", color: "#f39c12", msg: "–¢–µ–º–Ω—ã–µ –∏—Å–∫—É—Å—Å—Ç–≤–∞ —Ç–µ–ø–µ—Ä—å —Å–ª—É–∂–∞—Ç —Ç–µ–±–µ." },
            "üõ°": { name: "–°–ö–ê–õ–ê", icon: "üõ°", color: "#f1c40f", msg: "–¢–≤–æ–π —Ä–∞–∑—É–º –∑–∞—â–∏—â–µ–Ω. –¢–≤–æ—è –≤–æ–ª—è –Ω–µ–ø–æ–∫–æ–ª–µ–±–∏–º–∞." },
            "üß™": { name: "–ë–ò–û–•–ê–ö–ï–†", icon: "üß™", color: "#2ecc71", msg: "–ë–∏–æ—Ö–∏–º–∏—è –∏ –∑–¥–æ—Ä–æ–≤—å–µ –≤—ã–≤–µ–¥–µ–Ω—ã –Ω–∞ –Ω–æ–≤—ã–π —É—Ä–æ–≤–µ–Ω—å." },
            "üèõ": { name: "–ò–ù–ö–í–ò–ó–ò–¢–û–†", icon: "üèõ", color: "#FFFFF0", msg: "–¢—ã –∏–∑—É—á–∏–ª –≤—Å–µ –æ—Ç—á–µ—Ç—ã –æ—Ä–¥–µ–Ω–∞." }
        };

        let pendingAchievements = [];

        const categoriesMap = new Map();
        if (typeof postsDB !== 'undefined') {
            postsDB.forEach(item => {
                const parts = item.c.split(' ');
                const icon = parts[0];
                const name = parts.slice(1).join(' ');
                if (!categoriesMap.has(item.c)) {
                    categoriesMap.set(item.c, { icon, name, full: item.c, count: 0 });
                }
                categoriesMap.get(item.c).count++;
            });
        }
        
        const uniqueCategoriesList = Array.from(categoriesMap.values());
        
        let currentViewState = 'home';
        let currentCategory = null;
        let searchQuery = "";

        const listHeader = document.getElementById('listHeader');
        const backToHomeBtn = document.getElementById('backToHomeBtn');
        const homeTilesContainer = document.getElementById('homeTilesContainer');
        const listViewContainer = document.getElementById('listViewContainer');
        const postsContainer = document.getElementById('postsContainer');
        const searchInput = document.getElementById('searchInput');
        const tagsContainer = document.getElementById('tagsContainer');
        const mainContent = document.getElementById('mainContent');
        const homeWrapper = document.getElementById('homeWrapper');
        const randomBtn = document.getElementById('randomBtn');
        const achievementsRow = document.getElementById('achievementsRow');
        
        const modalOverlay = document.getElementById('modalOverlay');
        const postSheet = document.getElementById('postSheet');
        const sheetTitle = document.getElementById('sheetTitle');
        const sheetCategory = document.getElementById('sheetCategory');
        const sheetActions = document.getElementById('sheetActions');
        const readBtn = document.getElementById('readBtn');
        const favSheetBtn = document.getElementById('favSheetBtn');
        const shareBtn = document.getElementById('shareBtn');
        const lockedBtn = document.getElementById('lockedBtn');
        const relatedContainer = document.getElementById('relatedContainer');
        const upsellBtn = document.getElementById('upsellBtn');
        
        const celebrationModal = document.getElementById('celebrationModal');
        const celIcon = document.getElementById('celIcon');
        const celName = document.getElementById('celName');
        const celMsg = document.getElementById('celMsg');
        const celBtn = document.querySelector('.cel-btn');
        const toast = document.getElementById('toast');

        function showToast(msg) {
            toast.innerText = msg;
            toast.classList.add('show');
            setTimeout(() => toast.classList.remove('show'), 3000);
        }

        function getNotified() { return JSON.parse(localStorage.getItem(NOTIFIED_KEY) || '[]'); }
        function addNotified(id) { 
            const list = getNotified();
            if(!list.includes(id)) { list.push(id); localStorage.setItem(NOTIFIED_KEY, JSON.stringify(list)); }
        }

        function closeCelModal() {
            celebrationModal.classList.remove('active');
            if(pendingAchievements.length > 0) {
                setTimeout(showNextAchievement, 500);
            }
        }

        function showNextAchievement() {
            if(pendingAchievements.length === 0) return;
            const next = pendingAchievements.shift(); 
            
            celIcon.innerText = next.icon;
            celName.innerText = next.name;
            celMsg.innerText = next.msg || "–î–æ—Å—Ç–∏–∂–µ–Ω–∏–µ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ!";
            
            celName.style.color = "#FFFFF0";
            celName.style.textShadow = "none";
            celIcon.style.filter = "none";
            celBtn.style.background = "var(--accent)";
            celBtn.style.color = "#272727";
            celBtn.style.boxShadow = "none";
            document.querySelector('.celebration-card').style.borderColor = "var(--accent)";
            document.querySelector('.celebration-card').style.boxShadow = "none";

            if(next.color && next.id !== "SUPERHUMAN") {
                celName.style.color = next.color;
                celName.style.textShadow = `0 0 15px ${next.color}66`;
                celIcon.style.filter = `drop-shadow(0 0 20px ${next.color})`;
                celBtn.style.background = next.color;
                celBtn.style.boxShadow = `0 5px 20px ${next.color}66`;
                document.querySelector('.celebration-card').style.borderColor = next.color;
                document.querySelector('.celebration-card').style.boxShadow = `0 0 50px ${next.color}33`;
            } else if(next.id === "SUPERHUMAN") {
                celName.style.color = "#FFFFF0";
                celName.style.textShadow = "0 0 20px rgba(255, 255, 240, 0.8)";
                celIcon.style.filter = "drop-shadow(0 0 30px #FFFFF0)";
                celBtn.style.background = "linear-gradient(90deg, #FFFFF0, #cf0a0a, #FFFFF0)";
                celBtn.style.color = "#000";
                document.querySelector('.celebration-card').style.borderColor = "#FFFFF0";
            }

            tg.HapticFeedback.impactOccurred('heavy');
            celebrationModal.classList.add('active');
            addNotified(next.id);
        }

        function updateProgress() {
            if (typeof postsDB === 'undefined') return;
            
            const totalPosts = postsDB.filter(item => !item.locked).length;
            const readList = getRead();
            const validReadCount = postsDB.filter(item => !item.locked && readList.includes(item.u)).length;

            let percent = 0;
            if (totalPosts > 0) percent = Math.round((validReadCount / totalPosts) * 100);

            // === –õ–û–ì–ò–ö–ê –†–ê–ù–ì–û–í ===
            let rank = "–ü–û–°–õ–ï–î–û–í–ê–¢–ï–õ–¨"; // 0-10%
            if (percent >= 10) rank = "–°–¢–†–ê–ñ –ó–ù–ê–ù–ò–ô";
            if (percent >= 30) rank = "–ö–û–ù–°–£–õ";
            if (percent >= 50) rank = "–ü–û–°–û–õ –ò–ù–ö–í–ò–ó–ò–¶–ò–ò";
            if (percent >= 75) rank = "–û–†–ê–ö–£–õ";
            if (percent >= 100) rank = "–°–í–ï–†–•–ß–ï–õ–û–í–ï–ö";

            const notified = getNotified();
            
            uniqueCategoriesList.forEach(cat => {
                const config = ACHIEVEMENTS_CONFIG[cat.icon];
                if(!config) return;
                
                const catPosts = postsDB.filter(p => p.c === cat.full);
                const catRead = catPosts.filter(p => readList.includes(p.u)).length;
                
                if (catPosts.length > 0 && catRead === catPosts.length) {
                    if(!notified.includes(cat.full)) {
                        if(!pendingAchievements.find(p => p.id === cat.full)) {
                            pendingAchievements.push({
                                id: cat.full,
                                name: config.name,
                                icon: config.icon,
                                color: config.color,
                                msg: config.msg
                            });
                        }
                    }
                }
            });

            if (percent === 100) {
                if(!notified.includes("SUPERHUMAN")) {
                    if(!pendingAchievements.find(p => p.id === "SUPERHUMAN")) {
                        pendingAchievements.push({
                            id: "SUPERHUMAN",
                            name: "–°–í–ï–†–•–ß–ï–õ–û–í–ï–ö",
                            icon: "‚ö°Ô∏è",
                            msg: "–¢—ã –ø—Ä–æ—à–µ–ª –≤–µ—Å—å –ø—É—Ç—å. –¢—ã –≤–∏–¥–µ–ª –≤—Å—ë. –¢–µ–ø–µ—Ä—å —Ç—ã —Å–æ–∑–¥–∞–µ—à—å —Ä–µ–∞–ª—å–Ω–æ—Å—Ç—å."
                        });
                    }
                }
            }

            const progressBar = document.getElementById('progressBar');
            const rankName = document.getElementById('rankName');
            const progressStats = document.getElementById('progressStats');
            const progressCard = document.getElementById('progressCard');

            if (progressBar && rankName) {
                progressBar.style.width = percent + '%';
                rankName.innerText = rank;
                progressStats.innerText = `${validReadCount}/${totalPosts} (${percent}%)`;

                rankName.className = 'rank-name';
                progressCard.className = 'progress-card glide-entry';

                if (rank === "–°–í–ï–†–•–ß–ï–õ–û–í–ï–ö") {
                    rankName.classList.add('ascended-text');
                    progressCard.classList.add('ascended');
                }
            }

            renderAchievements(readList);
        }

        function renderAchievements(readList) {
            achievementsRow.innerHTML = '';
            
            uniqueCategoriesList.forEach(cat => {
                const config = ACHIEVEMENTS_CONFIG[cat.icon];
                if(!config) return;

                const catPosts = postsDB.filter(p => p.c === cat.full);
                const catTotal = catPosts.length;
                if(catTotal === 0) return;

                const catRead = catPosts.filter(p => readList.includes(p.u)).length;
                const isUnlocked = catRead === catTotal;

                const badge = document.createElement('div');
                badge.className = `badge ${isUnlocked ? 'unlocked' : ''}`;
                badge.innerText = config.icon;
                
                if(isUnlocked) {
                    badge.style.borderColor = config.color;
                    badge.style.color = "#fff";
                    badge.style.boxShadow = `0 0 10px ${config.color}88`;
                    badge.style.background = `${config.color}33`;
                } else {
                    badge.style.borderColor = "rgba(255, 255, 240, 0.1)";
                    badge.style.color = "rgba(255, 255, 240, 0.2)";
                    badge.style.boxShadow = "none";
                    badge.style.background = "rgba(0,0,0,0.3)";
                }
                
                badge.onclick = () => {
                    tg.HapticFeedback.impactOccurred('light');
                    if(isUnlocked) {
                        celIcon.innerText = config.icon;
                        celName.innerText = config.name;
                        celMsg.innerText = config.msg;
                        
                        celName.style.color = config.color;
                        celName.style.textShadow = `0 0 15px ${config.color}66`;
                        celIcon.style.filter = `drop-shadow(0 0 20px ${config.color})`;
                        celBtn.style.background = config.color;
                        celBtn.style.boxShadow = `0 5px 20px ${config.color}66`;
                        document.querySelector('.celebration-card').style.borderColor = config.color;
                        
                        celebrationModal.classList.add('active');
                    } else {
                        showToast(`–ü—Ä–æ—á–∏—Ç–∞–π —Ä–∞–∑–¥–µ–ª ${cat.icon}, —á—Ç–æ–±—ã –æ—Ç–∫—Ä—ã—Ç—å`);
                    }
                };

                achievementsRow.appendChild(badge);
            });
            
            const isAscended = getNotified().includes("SUPERHUMAN");
            const ascendedBadge = document.createElement('div');
            ascendedBadge.className = `badge secret ${isAscended ? 'unlocked' : ''}`;
            ascendedBadge.innerText = isAscended ? "‚ö°Ô∏è" : "?";
            ascendedBadge.onclick = () => {
                if(isAscended) {
                    celIcon.innerText = "‚ö°Ô∏è";
                    celName.innerText = "–°–í–ï–†–•–ß–ï–õ–û–í–ï–ö";
                    celMsg.innerText = "–¢—ã –ø—Ä–æ—à–µ–ª –≤–µ—Å—å –ø—É—Ç—å. –¢—ã –≤–∏–¥–µ–ª –≤—Å—ë.";
                    celName.style.color = "#FFFFF0";
                    celIcon.style.filter = "drop-shadow(0 0 30px #FFFFF0)";
                    celBtn.style.background = "linear-gradient(90deg, #FFFFF0, #cf0a0a, #FFFFF0)";
                    celBtn.style.color = "#000";
                    document.querySelector('.celebration-card').style.borderColor = "#FFFFF0";
                    celebrationModal.classList.add('active');
                } else {
                    showToast("–°–µ–∫—Ä–µ—Ç–Ω–æ–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ. –û—Ç–∫—Ä–æ–π –≤—Å—ë.");
                }
            };
            achievementsRow.appendChild(ascendedBadge);
        }

        function getRead() { return JSON.parse(localStorage.getItem(READ_KEY) || '[]'); }
        function setRead(url) { 
            const list = getRead();
            if(!list.includes(url)) { 
                list.push(url); 
                localStorage.setItem(READ_KEY, JSON.stringify(list)); 
                updateProgress(); 
            }
        }
        
        function getFav() { return JSON.parse(localStorage.getItem(FAV_KEY) || '[]'); }
        function toggleFav(url) {
            let list = getFav();
            if(list.includes(url)) list = list.filter(u => u !== url);
            else list.push(url);
            localStorage.setItem(FAV_KEY, JSON.stringify(list));
            return list.includes(url);
        }

        function adjustPadding() {
            requestAnimationFrame(() => {
                const headerHeight = listHeader.offsetHeight;
                mainContent.style.paddingTop = (headerHeight + 20) + 'px';
            });
        }

        function saveState() {
            try {
                const state = { view: currentViewState, category: currentCategory, scroll: window.scrollY, search: searchQuery, ts: Date.now() };
                localStorage.setItem(STATE_KEY, JSON.stringify(state));
            } catch (e) {}
        }

        function restoreState() {
            try {
                const raw = localStorage.getItem(STATE_KEY);
                if (!raw) return;
                const state = JSON.parse(raw);
                if (Date.now() - state.ts > STATE_TTL) { localStorage.removeItem(STATE_KEY); return; }

                if (state.view === 'list') {
                    if (state.category === "üèõ –§–£–ù–î–ê–ú–ï–ù–¢ (–û–¢–ß–ï–¢–´)") showCredo(false);
                    else switchToList(state.category, false);
                    
                    if (state.search) {
                        searchQuery = state.search;
                        searchInput.value = state.search;
                        filterAndRenderList(false);
                    }
                    setTimeout(() => { window.scrollTo(0, state.scroll); }, 10);
                }
            } catch (e) {}
        }

        function switchToHome() {
            currentViewState = 'home';
            currentCategory = null;
            searchQuery = "";
            searchInput.value = "";
            backToHomeBtn.style.display = 'none';
            tagsContainer.style.display = 'none';
            listViewContainer.style.display = 'none';
            homeWrapper.style.display = 'block';
            randomBtn.style.display = 'flex';
            adjustPadding();
            window.scrollTo({ top: 0 });
            tg.HapticFeedback.impactOccurred('light');
            localStorage.removeItem(STATE_KEY);
            updateProgress();
            
            // –í–ê–ñ–ù–û: –ê—á–∏–≤–∫–∞ –≤—ã–ª–µ—Ç–∞–µ—Ç –¢–û–õ–¨–ö–û –¢–£–¢
            if(pendingAchievements.length > 0) {
                setTimeout(showNextAchievement, 400);
            }
        }

        function switchToList(category, animate = true) {
            currentViewState = 'list';
            currentCategory = category;
            backToHomeBtn.style.display = 'flex';
            tagsContainer.style.display = 'flex';
            homeWrapper.style.display = 'none';
            listViewContainer.style.display = 'block';
            randomBtn.style.display = 'none';
            renderTags();
            filterAndRenderList(animate);
            adjustPadding();
            if(animate) window.scrollTo({ top: 0 });
        }

        function showCredo(animate = true) {
            setupSpecialList("üèõ –§–£–ù–î–ê–ú–ï–ù–¢ (–û–¢–ß–ï–¢–´)", animate);
        }

        function setupSpecialList(catName, animate) {
            currentViewState = 'list';
            currentCategory = catName;
            backToHomeBtn.style.display = 'flex';
            tagsContainer.style.display = 'flex';
            homeWrapper.style.display = 'none';
            listViewContainer.style.display = 'block';
            randomBtn.style.display = 'none';
            tagsContainer.innerHTML = '';
            const homeTag = document.createElement('div');
            homeTag.className = 'tag';
            homeTag.innerText = '‚Üê –ù–∞ –ì–ª–∞–≤–Ω—É—é';
            homeTag.onclick = switchToHome;
            tagsContainer.appendChild(homeTag);
            filterAndRenderList(animate);
            adjustPadding();
            if(animate) window.scrollTo({ top: 0 });
        }

        backToHomeBtn.addEventListener('click', switchToHome);

        function renderHomeTiles() {
            homeTilesContainer.innerHTML = '';
            let animDelay = 0.2;
            uniqueCategoriesList.forEach(catData => {
                if(catData.full.includes("–§–£–ù–î–ê–ú–ï–ù–¢")) return; // –§—É–Ω–¥–∞–º–µ–Ω—Ç –æ—Ç–¥–µ–ª—å–Ω–æ
                
                const tile = document.createElement('div');
                tile.className = 'category-tile glide-entry';
                tile.style.animationDelay = `${animDelay}s`;
                tile.innerHTML = `
                    <div class="tile-icon">${catData.icon}</div>
                    <div>
                        <div class="tile-title">${catData.name}</div>
                        <div class="tile-count">${catData.count} –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤</div>
                    </div>
                `;
                tile.onclick = () => {
                    tg.HapticFeedback.impactOccurred('medium');
                    switchToList(catData.full);
                };
                homeTilesContainer.appendChild(tile);
                animDelay += 0.05;
            });
        }

        function renderTags() {
            tagsContainer.innerHTML = '';
            const homeTag = document.createElement('div');
            homeTag.className = 'tag';
            homeTag.innerText = '–í—Å–µ';
            homeTag.onclick = () => { currentCategory = null; renderTags(); filterAndRenderList(true); };
            if(currentCategory === null) homeTag.classList.add('active');
            tagsContainer.appendChild(homeTag);

            uniqueCategoriesList.forEach(catData => {
                const btn = document.createElement('div');
                btn.className = `tag ${catData.full === currentCategory ? 'active' : ''}`;
                btn.innerText = catData.name;
                btn.onclick = () => {
                    currentCategory = catData.full;
                    renderTags();
                    filterAndRenderList(true);
                    tg.HapticFeedback.impactOccurred('light');
                    window.scrollTo({ top: 0, behavior: 'smooth' });
                };
                tagsContainer.appendChild(btn);
            });
        }

        function filterAndRenderList(animate = true) {
            postsContainer.innerHTML = '';
            let animationIndex = 0;
            let filtered = [];

            if (currentCategory === "üèõ –§–£–ù–î–ê–ú–ï–ù–¢ (–û–¢–ß–ï–¢–´)") {
                filtered = postsDB.filter(item => item.c.includes("–§–£–ù–î–ê–ú–ï–ù–¢"));
            } else if (currentCategory === "‚≠êÔ∏è –ò–ó–ë–†–ê–ù–ù–û–ï") {
                const favs = getFav();
                filtered = postsDB.filter(item => favs.includes(item.u));
            } else {
                filtered = postsDB.filter(item => {
                    const catMatch = currentCategory ? item.c === currentCategory : true;
                    const searchMatch = item.t.toLowerCase().includes(searchQuery.toLowerCase());
                    return catMatch && searchMatch;
                });
            }

            if (filtered.length === 0) {
                const msg = currentCategory === "‚≠êÔ∏è –ò–ó–ë–†–ê–ù–ù–û–ï" ? "–í –∏–∑–±—Ä–∞–Ω–Ω–æ–º –ø–æ–∫–∞ –ø—É—Å—Ç–æ." : `–ü–æ –∑–∞–ø—Ä–æ—Å—É "<b>${searchQuery}</b>" –Ω–∏—Ö—Ä–µ–Ω–∞ –Ω–µ—Ç.`;
                postsContainer.innerHTML = `
                    <div class="empty-state glide-entry" style="animation-delay: 0.1s">
                        <div style="font-size: 40px; margin-bottom: 10px;">ü§´</div>
                        <div>${msg}</div>
                        <div style="margin-top: 5px; opacity: 0.7; font-size: 13px;">–ò—â–∏ –æ—Ç–≤–µ—Ç—ã –≤ –ò–Ω–∫–≤–∏–∑–∏—Ü–∏–∏.</div>
                        <button class="btn-inq-action" onclick="tg.openTelegramLink('https://t.me/GiftsHolyInquisition_bot')">
                            –ü–û–õ–£–ß–ò–¢–¨ –î–û–°–¢–£–ü ‚û§
                        </button>
                    </div>`;
                return;
            }

            const header = document.createElement('div');
            header.className = animate ? 'section-header glide-entry' : 'section-header';
            if(animate) header.style.animationDelay = '0.05s';
            header.innerText = currentCategory ? currentCategory : `–†–µ–∑—É–ª—å—Ç–∞—Ç—ã (${filtered.length})`;
            postsContainer.appendChild(header);

            const readList = getRead();

            filtered.forEach(item => {
                const div = document.createElement('div');
                const isRead = readList.includes(item.u);
                
                let classes = animate ? 'post-card glide-entry' : 'post-card';
                if(isRead) classes += ' is-read';
                
                div.className = classes;
                if (animate) div.style.animationDelay = `${0.05 + (animationIndex * 0.03)}s`;
                
                let titleHtml = item.t;
                if (searchQuery) {
                    const regex = new RegExp(`(${searchQuery})`, 'gi');
                    titleHtml = item.t.replace(regex, '<span class="highlight">$1</span>');
                }
                
                let iconsHtml = '';
                if(isRead) iconsHtml += '<span class="read-icon">‚úì</span>';

                div.innerHTML = `<div class="post-title">${titleHtml} <span>${iconsHtml}</span></div>`;
                div.onclick = () => { openSheet(item); };
                postsContainer.appendChild(div);
                animationIndex++;
            });
        }

        searchInput.addEventListener('input', (e) => {
            searchQuery = e.target.value;
            if (currentViewState === 'home' && searchQuery.length > 0) switchToList(null, true);
            filterAndRenderList(true);
        });

        randomBtn.onclick = () => {
            tg.HapticFeedback.impactOccurred('heavy');
            const randomItem = postsDB[Math.floor(Math.random() * postsDB.length)];
            openSheet(randomItem);
        }

        function openSheet(item) {
            tg.HapticFeedback.impactOccurred('medium');
            sheetTitle.innerText = item.t;
            const catIcon = item.c.split(' ')[0];
            sheetCategory.innerHTML = `<span style="font-size: 18px;">${catIcon}</span> ${item.c.substring(catIcon.length)}`;
            
            // –ï—Å–ª–∏ –ø–æ—Å—Ç locked - —Å–∫—Ä—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫–∏ (—Ö–æ—Ç—è –≤ —ç—Ç–æ–π –ë–î locked –Ω–µ—Ç, –Ω–æ –Ω–∞ –≤—Å—è–∫–∏–π —Å–ª—É—á–∞–π)
            sheetActions.style.display = 'flex';
            lockedBtn.style.display = 'none';
            
            setRead(item.u);
            
            readBtn.onclick = () => {
                tg.HapticFeedback.impactOccurred('light');
                saveState();
                tg.openTelegramLink(item.u);
            };

            shareBtn.onclick = () => {
                tg.HapticFeedback.impactOccurred('light');
                const shareUrl = 'https://t.me/share/url?url=' + encodeURIComponent(item.u) + '&text=' + encodeURIComponent(item.t);
                tg.openTelegramLink(shareUrl);
            };

            const isFav = getFav().includes(item.u);
            updateFavBtnStyle(isFav);
            favSheetBtn.onclick = () => {
                tg.HapticFeedback.impactOccurred('light');
                const newState = toggleFav(item.u);
                updateFavBtnStyle(newState);
            };

            upsellBtn.onclick = () => {
                tg.HapticFeedback.impactOccurred('light');
                saveState();
                tg.openTelegramLink('https://t.me/GiftsHolyInquisition_bot');
            }
            
            const related = postsDB.filter(p => p.c === item.c && p.u !== item.u).sort(() => 0.5 - Math.random()).slice(0, 3);
            relatedContainer.innerHTML = '';
            if (related.length === 0) relatedContainer.innerHTML = '<div style="color:rgba(255,255,240,0.3); font-size:13px;">–ù–µ—Ç –ø–æ—Ö–æ–∂–∏—Ö –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤</div>';
            else {
                related.forEach(rel => {
                    const div = document.createElement('div');
                    div.className = 'related-item';
                    div.innerHTML = `<span>${rel.t}</span> <span class="related-arrow">‚Üí</span>`;
                    div.onclick = () => { openSheet(rel); };
                    relatedContainer.appendChild(div);
                });
            }
            modalOverlay.classList.add('active');
            postSheet.classList.add('active');
            
            if(!document.querySelector(`.post-card[onclick*="${item.u}"]`)?.classList.contains('is-read')) {
                 filterAndRenderList(false);
            }
        }

        function updateFavBtnStyle(isActive) {
            if(isActive) {
                favSheetBtn.classList.add('active');
                favSheetBtn.innerText = '‚≠êÔ∏è';
            } else {
                favSheetBtn.classList.remove('active');
                favSheetBtn.innerText = '‚òÜ';
            }
        }

        function closeSheet() { 
            modalOverlay.classList.remove('active'); 
            postSheet.classList.remove('active'); 
            // –ó–¥–µ—Å—å –∞—á–∏–≤–∫—É –ù–ï –ø–æ–∫–∞–∑—ã–≤–∞–µ–º! –û–Ω–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ switchToHome
        }
        
        modalOverlay.addEventListener('click', closeSheet);

        document.getElementById('credoBtn').addEventListener('click', () => {
            tg.HapticFeedback.impactOccurred('medium');
            showCredo(true);
        });

        if (typeof postsDB !== 'undefined') {
            renderHomeTiles();
            updateProgress();
        }
        adjustPadding();
        restoreState();
        window.addEventListener('resize', adjustPadding);

    </script>
</body>
</html>